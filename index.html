<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>G.I.G.O.T — L’absurde, organisé.</title>
  <meta name="description" content="G.I.G.O.T — Groupe d’Intervention Galactique Opérationnellement Taré. Corporation francophone, autonome, absurde et dangereusement efficace dans l’univers de Star Citizen." />

  <!-- Polices -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600;800&family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">

  <!-- CSS -->
  <link rel="stylesheet" href="styles.css" />

  <!-- CSP (compatible GitHub Pages + quelques styles inline pour le modal) -->
  <meta http-equiv="Content-Security-Policy" content="
    default-src 'self';
    script-src 'self' https://cdn.jsdelivr.net;
    style-src 'self' 'unsafe-inline' https://fonts.googleapis.com;
    font-src https://fonts.gstatic.com 'self';
    img-src 'self' data: https:;
    connect-src 'self' https://fjhsakmjcdqpolccihyj.supabase.co;
    object-src 'none';
    base-uri 'self';
    upgrade-insecure-requests;
  ">

  <!-- Supabase UMD -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.min.js" defer></script>
  <!-- Ton JS applicatif (⚠️ garde ce nom/version pour casser le cache après MAJ) -->
  <script src="app.js?v=prod-inv4" defer></script>
</head>

<body>
  <header class="site-header">
    <div class="container nav-wrap">
      <a href="#" class="logo" aria-label="Accueil G.I.G.O.T">
        <span class="logo-mark"><img src="img/logoGIGOT.png" alt="Logo G.I.G.O.T" class="logo-img"></span>
        <span class="logo-text">G.I.G.O.T</span>
      </a>
      <nav aria-label="Navigation principale">
        <ul class="nav">
          <li><a href="#histoire">Histoire</a></li>
          <li><a href="#divisions">Divisions</a></li>
          <li><a href="#fonctionnement">Fonctionnement</a></li>
          <li><a href="#recrutement">Recrutement</a></li>
          <li class="nav-cta">
            <div class="cta">
              <button class="btn btn-primary" id="btn-login">Se connecter avec Discord</button>
              <button class="btn btn-ghost" id="btn-logout">Se déconnecter</button>
            </div>
          </li>
        </ul>
      </nav>
    </div>
  </header>

  <main id="content" class="site-main">
    <section class="hero">
      <div class="container">
        <h1>Groupe d’Intervention Galactique <br class="br-xl" />Opérationnellement Taré</h1>
        <p class="tagline">« L’univers est vaste. Nous, plus encore. »</p>
        <p class="lead">Corporation francophone, autonome, absurde et dangereusement (in)efficace. Si tu n’as pas ta place dans une organisation classique, c’est que tu as ta place chez nous.</p>
        <div class="cta">
          <a class="btn btn-primary" href="https://discord.gg/krV7cMn2Nj" target="_blank" rel="noopener noreferrer">Rejoindre sur Discord</a>
          <a class="btn btn-primary" href="https://robertsspaceindustries.com/orgs/RBB" target="_blank" rel="noopener noreferrer">Rejoindre sur Spectrum</a>
          <a class="btn btn-ghost" href="#histoire" aria-label="Découvrir notre histoire">Découvrir</a>
        </div>
      </div>
    </section>

    <section id="histoire" class="section">
      <div class="container">
        <h2>Histoire de G.I.G.O.T</h2>
        <p class="lead">
          Tout commence sur Daymar, dans un bar creusé dans une gorge de roche rouge, à deux pas d’un spatioport désaffecté.
          Trois individus, une table bancale, et une idée simple : faire une orga tarée… mais qui fonctionne.
        </p>

        <details class="accordion">
          <summary>
            <span class="chevron" aria-hidden="true"></span>
            <span>Afficher l’histoire complète</span>
          </summary>
          <div class="accordion-content">
            <p>Tout commence sur Daymar, dans un bar miteux creusé dans une gorge de roche rouge, à deux pas d’un spatioport désaffecté. Là, entre vapeurs de whisky synthétique et musique trop forte, trois individus se retrouvent réunis autour d’un vieux tonneau faisant office de table. Un chirurgien de guerre à la retraite, un mineur freelance au passé aussi flou qu'un scan atmosphérique, et un mercenaire dur d’oreille victime d’un tir allié mal orienté.</p>
            <p>Leur point commun ? Un goût du risque, un mépris poli pour l’autorité, et une furieuse envie de faire bouger les choses... à leur manière.</p>
            <p>Autour de cette table bancale, les discussions fusent. Ils parlent d’escouades sacrifiées, de corporations avides, de commandants incompétents. Mais surtout, ils rient. Ils rient beaucoup. Et entre deux gorgées, l’idée naît :</p>
            <blockquote class="quote">« Puisqu’aucune organisation n’est foutue de fonctionner sans sombrer dans la folie... autant faire une orga tarée, mais qui fonctionne ! »</blockquote>
            <p>Quelques semaines plus tard, ils reviennent sur Daymar, cette fois à bord d’un Cutlass noir cabossé, marqué d’un symbole griffonné à la main : un gigot ailé, entouré d’un cercle. La première itération du logo. G.I.G.O.T venait de naître.</p>
            <p>D’abord considérés comme une simple bande de marginaux, ils se font rapidement remarquer par leurs actions imprévisibles mais diablement efficaces. Extraction médicale sous le feu, livraison de cargaisons en territoire pirate, évacuation d’un avant-poste infecté par un agent toxique – toujours avec panache, improvisation, et humour noir.</p>
            <p>En 2949, ils formalisent leur structure. Les divisions sont fondées. Des noms aussi absurdes qu'efficaces sont choisis. Le Centre Médical Rumsteck voit le jour avec une table d’opération montée sur roulettes. Bacon Industries est lancé avec une foreuse trouvée dans une casse. Et Beef Jerky Mercenary s’équipe de fusils récupérés sur les champs de bataille les plus douteux de Stanton.</p>
            <p>Ce n’est qu’à partir de 2952 que leur réputation dépasse les frontières. Des commandants commencent à les recommander pour des contrats officieux. Le bouche-à-oreille circule sur Spectrum. Des recrues d’autres systèmes arrivent, attirées par leur promesse :</p>
            <blockquote class="quote">« On ne te demande pas d’être normal. On te demande d’être bon... à notre façon. »</blockquote>
            <p>Aujourd’hui, G.I.G.O.T opère dans presque tous les secteurs de l’UEE et au-delà. L’organisation possède ses propres vaisseaux capitaux, une flotte d’intervention rapide, et un réseau de satellites clandestins pour le renseignement. Et surtout, une culture unique : celle d’un groupe de fous, parfaitement organisés.</p>
            <blockquote class="quote">« Tarés, mais opérationnels. »</blockquote>
          </div>
        </details>
      </div>
    </section>

    <section id="divisions" class="section">
      <div class="container">
        <h2>Divisions</h2>

        <div class="grid cards">
          <article class="card">
            <h3>⚕️ Division Médicale</h3>
            <p class="eyebrow">Centre Médical Rumsteck</p>
            <p>Au cœur de chaque sauvetage, la Division Médicale incarne la compassion et la rigueur. Interventions en zones de guerre, postes contaminés, crashs de vaisseaux ou sur planètes inhospitalières : dotée d’unités mobiles de soins avancés, d’une flotte dédiée et de protocoles d’intervention tactique, elle sauve des vies sans perdre son sang-froid.</p>
            <p>Au-delà du secours, elle mène des recherches biomédicales, analyses de terrain et évaluations d’environnements toxiques. <em>Leur mantra :</em> « On ne laisse jamais un taré derrière. Sauf s’il l’a vraiment cherché. »</p>
          </article>

          <article class="card">
            <h3>💪 Division Industrielle</h3>
            <p class="eyebrow">Bacon Industries</p>
            <p>Pilier logistique et économique, la Division Industrielle gère extraction, transformation et mise en circulation des ressources. Capable d’opérations massives d’exploitation minière, d’optimiser des chaînes de raffinage et de négocier des contrats rentables, elle est dotée d’une flotte spécialisée (Mole, Reclaimer, Hull Series) pour fonctionner en autonomie.</p>
            <p>Elle fabrique des composants, recycle des matériaux et assure le soutien logistique interdivisions. <em>Devise :</em> « Si tu veux la guerre, il te faudra d’abord notre carburant. »</p>
          </article>

          <article class="card">
            <h3>🌪️ Division Militaire</h3>
            <p class="eyebrow">Beef Jerky Mercenary</p>
            <p>Bras armé de G.I.G.O.T, la Division Militaire incarne puissance, réactivité et tactique. Tireurs d’élite, pilotes de chasse, commandos et spécialistes du combat spatial/planétaire alternent infiltration discrète et assaut orbital. Équipement optimisé : armures lourdes, déploiements de Nova/Ballista, chasseurs pour la couverture aérienne.</p>
            <p>Souvent en coopération avec le Renseignement et la Logistique, elle frappe vite, fort, et sans se faire remarquer – sauf si c’est le but. <em>Mantra :</em> « On discute après, s’il reste quelqu’un. »</p>
          </article>
        </div>
      </div>
    </section>

    <!-- visible uniquement si l’utilisateur est dans la guilde + a un rôle autorisé -->
    <section class="section" data-protected>
      <div class="container">
        <h2>Espace membres</h2>

        <!-- Panneau CONTROLES inline (mouvement + filtres) -->
        <section id="inv-controls" class="section">
          <div class="container">
            <div class="toolbar">
              <h3 style="margin:0;">Gestion d’inventaire</h3>
              <div id="inv-summary" class="summary"></div>
            </div>

            <!-- Formulaire Mouvement -->
            <form id="form-mvt" autocomplete="off" class="card">
              <h4 style="margin-top:0;">Mouvement de stock</h4>

              <div class="seg">
                <label><input type="radio" name="dir" value="in" checked> Entrée</label>
                <label><input type="radio" name="dir" value="out"> Sortie</label>
              </div>

              <div class="grid-two">
                <label>Type
                  <input id="mvt-type" list="dl-type" placeholder="Ex: Médical" required>
                  <datalist id="dl-type"></datalist>
                  <small id="badge-type" class="badge"></small>
                </label>

                <label>Item
                  <input id="mvt-name" list="dl-name" placeholder="Ex: MedPen" required>
                  <datalist id="dl-name"></datalist>
                  <small id="badge-name" class="badge"></small>
                </label>
              </div>

              <div class="grid-two">
                <label>Lieu
                  <input id="mvt-location" list="dl-location" placeholder="Ex: Area18">
                  <datalist id="dl-location"></datalist>
                  <small id="badge-location" class="badge"></small>
                </label>

                <label>Possesseur
                  <input id="mvt-owner" list="dl-owner" placeholder="Ex: Garde Tactique">
                  <datalist id="dl-owner"></datalist>
                  <small id="badge-owner" class="badge"></small>
                </label>
              </div>

              <div class="grid-two">
                <label>Quantité
                  <input id="mvt-qty" type="number" min="1" step="1" value="1" required>
                </label>
                <label>Prix unitaire (optionnel)
                  <input id="mvt-unit" type="number" min="0" step="0.01" placeholder="0.00">
                </label>
              </div>

              <div class="actions">
                <button type="submit" class="btn btn-primary">Valider</button>
                <button type="button" id="mvt-reset" class="btn btn-ghost">Réinitialiser</button>
                <div id="mvt-debug" class="debug" hidden></div>
              </div>
            </form>

            <!-- Filtres inline -->
            <form id="form-filters" class="card" style="margin-top:12px;">
              <h4 style="margin-top:0;">Filtres</h4>
              <div class="grid-two">
                <label>Type
                  <select id="flt-type" multiple></select>
                </label>
                <label>Item
                  <select id="flt-name" multiple></select>
                </label>
              </div>
              <div class="grid-two">
                <label>Lieu
                  <select id="flt-location" multiple></select>
                </label>
                <label>Possesseur
                  <select id="flt-owner" multiple></select>
                </label>
              </div>
              <div class="actions">
                <button type="submit" class="btn btn-primary">Appliquer</button>
                <button type="button" id="filters-clear" class="btn btn-ghost">Effacer</button>
              </div>
              <div id="filters-chips" class="chips"></div>
              <div id="flt-debug" class="debug" hidden></div>
            </form>
          </div>
        </section>

        <!-- Inventaire -->
        <section id="inventaire" class="section">
          <div class="container">
            <h2>Inventaire</h2>

            <!-- Recherche -->
            <input type="text" id="search" placeholder="Rechercher..." />

            <!-- Tableau -->
            <table id="inv-table">
              <thead>
                <tr>
                  <th data-col="type">Type</th>
                  <th data-col="name">Item</th>
                  <th data-col="location">Lieu</th>
                  <th data-col="owner">Possesseur</th>
                  <th data-col="unit_price">Prix unitaire</th>
                  <th data-col="qty">Quantité</th>
                  <th data-col="valeur_totale">Valeur totale</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="inv-body"></tbody>
            </table>

            <!-- Pagination -->
            <div id="pagination"></div>

            <!-- Bouton ajout (Option A : visible pour tous les membres) -->
            <button id="btn-add" class="btn btn-primary">➕ Ajouter</button>
          </div>
        </section>

        <!-- Modal (ajout / édition) -->
        <div id="modal" style="display:none; position:fixed; top:20%; left:50%; transform:translateX(-50%); background:#12192b; padding:20px; border-radius:8px; z-index:1000;">
          <h3 id="modal-title">Nouvel item</h3>
          <form id="form-item">
            <input type="hidden" id="item-id" />
            <input type="text" id="item-type" placeholder="Type" required /><br/>
            <input type="text" id="item-name" placeholder="Item" required /><br/>
            <input type="text" id="item-location" placeholder="Lieu" /><br/>
            <input type="text" id="item-owner" placeholder="Possesseur" /><br/>
            <input type="number" id="item-unit_price" placeholder="Prix unitaire" step="0.01" /><br/>
            <input type="number" id="item-qty" placeholder="Quantité" /><br/>
            <button type="submit" class="btn btn-primary">Enregistrer</button>
            <button type="button" id="btn-cancel" class="btn btn-ghost">Annuler</button>
          </form>
        </div>
      </div>
    </section>

    <!-- visible uniquement si rôle staff -->
    <section class="section" data-staff>
      <div class="container">
        <h2>Staff</h2>
        <p>Outils et infos pour l’équipe staff.</p>
      </div>
    </section>

    <section id="recrutement" class="section section-accent">
      <div class="container">
        <h2>Recrutement</h2>
        <p>Envie de rejoindre une équipe « tarée, mais opérationnelle » ? Dis-nous qui tu es, ta division de cœur, et ce que tu as envie d’apporter. On discutera… s’il reste quelqu’un.</p>
        <div class="cta">
          <a class="btn btn-primary" href="https://discord.gg/krV7cMn2Nj" target="_blank" rel="noopener noreferrer">Discord</a>
          <a class="btn btn-primary" href="https://robertsspaceindustries.com/orgs/RBB" target="_blank" rel="noopener noreferrer">Spectrum</a>
          <a class="btn btn-ghost" href="mailto:contact@gigot.example">contact@gigot.example</a>
        </div>
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <div class="container foot">
      <p>© <span id="year"></span> G.I.G.O.T — L’absurde, organisé.</p>
      <a href="#content" class="to-top" aria-label="Revenir en haut">↑ Haut de page</a>
    </div>
  </footer>
</body>
</html>
