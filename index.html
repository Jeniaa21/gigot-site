<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>G.I.G.O.T — L’absurde, organisé.</title>
  <meta name="description" content="G.I.G.O.T — Groupe d’Intervention Galactique Opérationnellement Taré. Corporation francophone, autonome, absurde et dangereusement efficace dans l’univers de Star Citizen." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600;800&family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css" />
<!-- Supabase JS -->
<script src="https://esm.run/@supabase/supabase-js@2"></script>
<script>
  // ⬇️ REMPLACE par les valeurs de ton projet
  const SUPABASE_URL = "https://fjhsakmjcdqpolccihyj.supabase.co";
  const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZqaHNha21qY2RxcG9sY2NpaHlqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTczNTMwODgsImV4cCI6MjA3MjkyOTA4OH0.enWRFCbMC9vbVY_EVIJYnPdhk80M-UMnz3ud4fjcOxE";

  // IMPORTANT : URL exacte de ta page (inclut le chemin /<repo>/), sans hash
  const REDIRECT_URL = window.location.href.split('#')[0];

  const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

  async function syncDiscordRoles() {
    const { data: { session } } = await supabase.auth.getSession();
    if (!session) return { in_guild:false };
    const res = await fetch(`${SUPABASE_URL}/functions/v1/sync-discord-roles`, {
      method: "POST",
      headers: {
        "Authorization": `Bearer ${session.access_token}`,
        "Content-Type": "application/json"
      }
    });
    return await res.json();
  }

  async function loginWithDiscord() {
    await supabase.auth.signInWithOAuth({
      provider: "discord",
      options: {
        scopes: "identify guilds",
        redirectTo: REDIRECT_URL
      }
    });
  }

  async function logout() {
    await supabase.auth.signOut();
    document.documentElement.classList.remove("can-access","is-staff");
  }

  document.addEventListener("DOMContentLoaded", async () => {
    const data = await syncDiscordRoles();
    if (data.in_guild && (data.hasBasic || data.hasStaff)) {
      document.documentElement.classList.add("can-access");
      if (data.hasStaff) document.documentElement.classList.add("is-staff");
    } else {
      document.documentElement.classList.remove("can-access","is-staff");
    }
  });
</script>

</head>

<body>
  <header class="site-header">
    <div class="container nav-wrap">
      <a href="#" class="logo" aria-label="Accueil G.I.G.O.T">
        <span class="logo-mark"><img src="img\logoGIGOT.png" alt="Logo G.I.G.O.T" class="logo-img"></span>
        <span class="logo-text">G.I.G.O.T</span>
      </a>
      <nav aria-label="Navigation principale">
        <ul class="nav">
          <li><a href="#histoire">Histoire</a></li>
          <li><a href="#divisions">Divisions</a></li>
          <li><a href="#fonctionnement">Fonctionnement</a></li>
          <li><a href="#recrutement">Recrutement</a></li>
          <li class="nav-cta">
            <div class="cta">
              <button class="btn btn-primary" onclick="loginWithDiscord()">Se connecter avec Discord</button>
              <button class="btn btn-ghost" onclick="logout()">Se déconnecter</button>
            </div>
          </li>
        </ul>
      </nav>
    </div>
  </header>
  
  <main id="content" class="site-main">
    <section class="hero">
      <div class="container">
        <h1>Groupe d’Intervention Galactique <br class="br-xl" />Opérationnellement Taré</h1>
        <p class="tagline">« L’univers est vaste. Nous, plus encore. »</p>
        <p class="lead">Corporation francophone, autonome, absurde et dangereusement (in)efficace. Si tu n’as pas ta place dans une organisation classique, c’est que tu as ta place chez nous.</p>
        <div class="cta">
          <a class="btn btn-primary" href="https://discord.gg/krV7cMn2Nj" target="_blank" rel="noopener noreferrer">Rejoindre sur Discord</a>
          <a class="btn btn-primary" href="https://robertsspaceindustries.com/orgs/RBB" target="_blank" rel="noopener noreferrer">Rejoindre sur Spectrum</a>
          <a class="btn btn-ghost" href="#histoire" aria-label="Découvrir notre histoire">Découvrir</a>
        </div>

      </div>
    </section>

    <section id="histoire" class="section">
      <div class="container">
        <h2>Histoire de G.I.G.O.T</h2>
        <p class="lead">
          Tout commence sur Daymar, dans un bar creusé dans une gorge de roche rouge, à deux pas d’un spatioport désaffecté.
          Trois individus, une table bancale, et une idée simple : faire une orga tarée… mais qui fonctionne.
        </p>

        <details class="accordion">
          <summary>
            <span class="chevron" aria-hidden="true"></span>
            <span>Afficher l’histoire complète</span>
          </summary>
          <div class="accordion-content">
            <p>Tout commence sur Daymar, dans un bar miteux creusé dans une gorge de roche rouge, à deux pas d’un spatioport désaffecté. Là, entre vapeurs de whisky synthétique et musique trop forte, trois individus se retrouvent réunis autour d’un vieux tonneau faisant office de table. Un chirurgien de guerre à la retraite, un mineur freelance au passé aussi flou qu'un scan atmosphérique, et un mercenaire dur d’oreille victime d’un tir allié mal orienté.</p>
            <p>Leur point commun ? Un goût du risque, un mépris poli pour l’autorité, et une furieuse envie de faire bouger les choses... à leur manière.</p>
            <p>Autour de cette table bancale, les discussions fusent. Ils parlent d’escouades sacrifiées, de corporations avides, de commandants incompétents. Mais surtout, ils rient. Ils rient beaucoup. Et entre deux gorgées, l’idée naît :</p>
            <blockquote class="quote">« Puisqu’aucune organisation n’est foutue de fonctionner sans sombrer dans la folie... autant faire une orga tarée, mais qui fonctionne ! »</blockquote>
            <p>Quelques semaines plus tard, ils reviennent sur Daymar, cette fois à bord d’un Cutlass noir cabossé, marqué d’un symbole griffonné à la main : un gigot ailé, entouré d’un cercle. La première itération du logo. G.I.G.O.T venait de naître.</p>
            <p>D’abord considérés comme une simple bande de marginaux, ils se font rapidement remarquer par leurs actions imprévisibles mais diablement efficaces. Extraction médicale sous le feu, livraison de cargaisons en territoire pirate, évacuation d’un avant-poste infecté par un agent toxique – toujours avec panache, improvisation, et humour noir.</p>
            <p>En 2949, ils formalisent leur structure. Les divisions sont fondées. Des noms aussi absurdes qu'efficaces sont choisis. Le Centre Médical Rumsteck voit le jour avec une table d’opération montée sur roulettes. Bacon Industries est lancé avec une foreuse trouvée dans une casse. Et Beef Jerky Mercenary s’équipe de fusils récupérés sur les champs de bataille les plus douteux de Stanton.</p>
            <p>Ce n’est qu’à partir de 2952 que leur réputation dépasse les frontières. Des commandants commencent à les recommander pour des contrats officieux. Le bouche-à-oreille circule sur Spectrum. Des recrues d’autres systèmes arrivent, attirées par leur promesse :</p>
            <blockquote class="quote">« On ne te demande pas d’être normal. On te demande d’être bon... à notre façon. »</blockquote>
            <p>Aujourd’hui, G.I.G.O.T opère dans presque tous les secteurs de l’UEE et au-delà. L’organisation possède ses propres vaisseaux capitaux, une flotte d’intervention rapide, et un réseau de satellites clandestins pour le renseignement. Et surtout, une culture unique : celle d’un groupe de fous, parfaitement organisés.</p>
            <blockquote class="quote">« Tarés, mais opérationnels. »</blockquote>
          </div>
        </details>
      </div>
    </section>

    <section id="divisions" class="section">
      <div class="container">
        <h2>Divisions</h2>

        <div class="grid cards">
          <article class="card">
            <h3>⚕️ Division Médicale</h3>
            <p class="eyebrow">Centre Médical Rumsteck</p>
            <p>Au cœur de chaque sauvetage, la Division Médicale incarne la compassion et la rigueur. Interventions en zones de guerre, postes contaminés, crashs de vaisseaux ou sur planètes inhospitalières : dotée d’unités mobiles de soins avancés, d’une flotte dédiée et de protocoles d’intervention tactique, elle sauve des vies sans perdre son sang-froid.</p>
            <p>Au-delà du secours, elle mène des recherches biomédicales, analyses de terrain et évaluations d’environnements toxiques. <em>Leur mantra :</em> « On ne laisse jamais un taré derrière. Sauf s’il l’a vraiment cherché. »</p>
          </article>

          <article class="card">
            <h3>💪 Division Industrielle</h3>
            <p class="eyebrow">Bacon Industries</p>
            <p>Pilier logistique et économique, la Division Industrielle gère extraction, transformation et mise en circulation des ressources. Capable d’opérations massives d’exploitation minière, d’optimiser des chaînes de raffinage et de négocier des contrats rentables, elle est dotée d’une flotte spécialisée (Mole, Reclaimer, Hull Series) pour fonctionner en autonomie.</p>
            <p>Elle fabrique des composants, recycle des matériaux et assure le soutien logistique interdivisions. <em>Devise :</em> « Si tu veux la guerre, il te faudra d’abord notre carburant. »</p>
          </article>

          <article class="card">
            <h3>🌪️ Division Militaire</h3>
            <p class="eyebrow">Beef Jerky Mercenary</p>
            <p>Bras armé de G.I.G.O.T, la Division Militaire incarne puissance, réactivité et tactique. Tireurs d’élite, pilotes de chasse, commandos et spécialistes du combat spatial/planétaire alternent infiltration discrète et assaut orbital. Équipement optimisé : armures lourdes, déploiements de Nova/Ballista, chasseurs pour la couverture aérienne.</p>
            <p>Souvent en coopération avec le Renseignement et la Logistique, elle frappe vite, fort, et sans se faire remarquer – sauf si c’est le but. <em>Mantra :</em> « On discute après, s’il reste quelqu’un. »</p>
          </article>
        </div>
      </div>
    </section>

    <section id="fonctionnement" class="section">
      <div class="container">
        <h2>Fonctionnement interne</h2>

        <div class="grid two">
          <div>
            <h3>Hiérarchie</h3>
            <ul class="checklist">
              <li><strong>Le Haut Conseil</strong> : les trois commandants en chef (Médicale, Industrielle, Militaire) qui planifient et arbitrent les orientations majeures.</li>
              <li><strong>Garde Stratège</strong> : vétérans qui assistent la planification des missions complexes et la formation avancée.</li>
              <li><strong>Garde Tactique</strong> : chefs d’escouade et leaders d’opération, autonomes sur le terrain dans le cadre de leur mission.</li>
              <li><strong>Les Opérationnels</strong> : membres réguliers assignés à une division ; bras et yeux de G.I.G.O.T.</li>
              <li><strong>Les Recrues</strong> : intégration, apprentissage des codes, procédures et du style « sérieux sans se prendre au sérieux ».</li>
            </ul>
          </div>

          <div>
            <h3>Culture interne</h3>
            <ul class="bullets">
              <li><strong>Aucune obligation de perf’</strong> : ce qui compte, c’est la solidarité et l’énergie commune.</li>
              <li><strong>Rigueur &amp; humour</strong> : missions propres et procédures efficaces… avec une bonne dose d’absurde.</li>
              <li><strong>Références maison</strong> : running gags, mascotte en forme de gigot à moitié cramé, memes et traditions.</li>
              <li><strong>Une place pour chacun</strong> : débutant ou vétéran, on t’écoute, on te forme et on te laisse mener si tu t’en sens capable.</li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <!-- visible uniquement si l’utilisateur est dans la guilde + a un rôle autorisé -->
    <section class="section" data-protected>
      <div class="container">
        <h2>Espace membres</h2>
        <p>Bienvenue dans l’espace réservé G.I.G.O.T.</p>
      </div>
    </section>

    <!-- visible uniquement si rôle staff -->
    <section class="section" data-staff>
      <div class="container">
        <h2>Staff</h2>
        <p>Outils et infos pour l’équipe staff.</p>
      </div>
    </section>


    <section id="recrutement" class="section section-accent">
      <div class="container">
        <h2>Recrutement</h2>
        <p>Envie de rejoindre une équipe « tarée, mais opérationnelle » ? Dis-nous qui tu es, ta division de cœur, et ce que tu as envie d’apporter. On discutera… s’il reste quelqu’un.</p>
        <div class="cta">
          <a class="btn btn-primary" href="https://discord.gg/krV7cMn2Nj" target="_blank" rel="noopener noreferrer">Discord</a>
          <a class="btn btn-primary" href="https://robertsspaceindustries.com/orgs/RBB" target="_blank" rel="noopener noreferrer">Spectrum</a>
          <a class="btn btn-ghost" href="mailto:contact@gigot.example">contact@gigot.example</a>
        </div>
      </div>
    </section>
  </main>

  <footer class="site-footer">
    <div class="container foot">
      <p>© <span id="year"></span> G.I.G.O.T — L’absurde, organisé.</p>
      <a href="#content" class="to-top" aria-label="Revenir en haut">↑ Haut de page</a>
    </div>
  </footer>

  <script>
    // année courante
    document.getElementById('year').textContent = new Date().getFullYear();
  </script>
</body>
</html>
